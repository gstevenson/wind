var App;(()=>{var t=document.getElementById("myCanvas");t.height=1*t.width;var e=t.getContext("2d"),n=t.width/2,a=t.height/2,o=t.width/2*.8,i=JSON.parse(localStorage.getItem("runways"));function r(){e.clearRect(0,0,t.width,t.height),e.beginPath(),e.strokeStyle="#99005b",e.lineWidth=6,e.arc(n,a,o,0,2*Math.PI),e.fillStyle="#c5c6d0",e.fill(),e.stroke(),i.forEach((function(t){!function(t){var i=(t-270)*(Math.PI/180),r=Math.sqrt(2)*o*.5,l=n-r*Math.cos(i),h=a-r*Math.sin(i),u=n+r*Math.cos(i),c=a+r*Math.sin(i);e.beginPath(),e.strokeStyle="grey",e.lineWidth=4,e.moveTo(l,h),e.lineTo(u,c),e.stroke();var d=u+15*Math.cos(i-Math.PI/2),g=c+15*Math.sin(i-Math.PI/2);e.fillStyle="black",e.font="16px Arial",e.textAlign="center",e.textBaseline="middle";let M=s(t);e.fillText(M,d,g)}(t)}))}function l(t,e,n,a){t.save(),t.translate(e,n),t.rotate(a),t.beginPath(),t.moveTo(0,0),t.lineTo(-5,-10),t.lineTo(5,-10),t.closePath(),t.restore(),t.fill()}function s(t){let e=Math.round(t/10);return e>=100&&(e%=100),e.toString().padStart(2,"0")}function h(){var t=document.getElementById("windInput").value,i=document.getElementById("windSpeed").value;if(""!==t&&""!==i){r(),function(t,i){var r=(t-90)*(Math.PI/180),s=1.5*o;e.strokeStyle="blue",e.lineWidth=1,e.beginPath(),e.moveTo(n,a),e.lineTo(n+s*Math.cos(r),a+s*Math.sin(r)),e.stroke();var h=s/4;e.fillStyle="blue";for(var u=1;u<=3;u++){var c=n+u*h*Math.cos(r),d=a+u*h*Math.sin(r);l(e,c,d,r+Math.PI/2)}}(parseInt(t,10));var h=s(u(t));document.getElementById("idealRunwayValue").textContent=h,function(t,e,n){var a=n<180?n+180:n-180,o=n*Math.PI/180,i=t*Math.PI/180,r=Math.sin(o),l=Math.cos(o),s=r*Math.sin(i)+l*Math.cos(i),h=Math.acos(s),u=100,c=Math.round(u*e*Math.cos(h))/u,d=Math.round(u*e*Math.sin(h))/u,g=c>=0?"Headwind: ":"Tailwind: ",M="Crosswind from "+(t>=n&&t<a||n>=180&&(t>=n||t<a)?"Right: ":"Left: ");document.getElementById("headWindValue").textContent=g+c+"kt(s)",document.getElementById("crossWindValue").textContent=M+d+"kt(s)"}(t,i,u(t))}}function u(t){return i.reduce(((e,n)=>{const a=Math.abs(e-t);return Math.abs(n-t)<a?n:e}))}function s(t){let e=Math.round(t/10);return e>=100&&(e%=100),e.toString().padStart(2,"0")}e.beginPath(),null==localStorage.getItem("runways")&&(console.log("setting up application"),i=[20,200,140,320],localStorage.setItem("runways",JSON.stringify(i))),r(),h(),window.updateWindLine=h,window.reconfigureRunways=function(){var t=JSON.parse(localStorage.getItem("runways")),e=window.prompt("Enter a comma separated list of runways, using full magnetic heading",t.join(", ")).split(", ").map((function(t){return parseInt(t,10)}));i=e,localStorage.setItem("runways",JSON.stringify(i)),r(),h()},App={}})();